server:
  listen: ":443"
  tls:
    cert: "/path/to/cert.pem"
    key: "/path/to/key.pem"
    sni_fake: true
    fake_snis:
      - "cloudflare.com"
      - "google.com"
      - "github.com"

auth:
  method: "psk"
  key: "your-secret-key-change-this"

exit_ips:
  - "1.2.3.4"
  - "5.6.7.8"
  - "9.10.11.12"

strategy:
  type: "round_robin"  # round_robin, port_based, destination_based
  # 如果type是port_based，取消下面的注释:
  # port_ranges:
  #   - range: "0-32767"
  #     ip: "1.2.3.4"
  #   - range: "32768-65535"
  #     ip: "5.6.7.8"

snat:
  enabled: true
  gateway: "192.168.1.1"  # 网关地址，需要根据实际情况修改
  interface: "eth0"       # 网络接口，需要根据实际情况修改

logging:
  level: "info"
  file: "/var/log/multiexit-proxy.log"

# 健康检查配置
health_check:
  enabled: true      # 启用健康检查
  interval: "30s"    # 检查间隔（默认30秒）
  timeout: "5s"      # 检查超时（默认5秒）

# IP自动检测配置
ip_detection:
  enabled: true      # 启用IP自动检测
  interface: ""      # 指定网络接口（如"eth0"），为空则检测所有接口

# Web管理界面
web:
  enabled: true
  listen: ":8080"
  username: "admin"
  password: "admin123"

# 监控统计配置
monitor:
  enabled: true

# 连接管理配置
connection:
  read_timeout: "30s"      # 读取超时
  write_timeout: "30s"     # 写入超时
  idle_timeout: "300s"     # 空闲超时（5分钟）
  dial_timeout: "10s"      # 连接超时
  max_connections: 1000    # 最大并发连接数（0=无限制）
  keep_alive: true         # 启用TCP KeepAlive
  keep_alive_time: "30s"   # KeepAlive间隔

# Trojan协议支持（可选）
trojan:
  enabled: false
  password: ""

# 地理位置选择配置
geo_location:
  enabled: true      # 启用基于地理位置的IP选择
  api_url: ""        # 地理位置API URL（可选，默认使用ip-api.com）

